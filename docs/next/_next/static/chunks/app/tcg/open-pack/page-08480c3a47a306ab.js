(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{2974:(e,t,r)=>{Promise.resolve().then(r.bind(r,3537))},3537:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r(5155),o=r(7756),l=r(8998),n=r(2115),i=r(9566),s=r(3755),d=r(4665),c=r(3551),x=r(2479),f=r(9841),p=r(4290),u=r(3628),h=r(1314),g=r(7614);let m=e=>{let{cards:t,onClose:r}=e,[i,m]=(0,n.useState)(!1);return(0,a.jsx)(l.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:{xs:2,md:4},width:"100%"},children:(0,a.jsxs)(d.default,{sx:{width:"100%",bgcolor:"#f5f5f5",borderRadius:"12px",boxShadow:"4px 4px 8px #e0e0e0, -4px -4px 8px #ffffff",margin:"16px 0",overflow:"hidden"},children:[(0,a.jsx)(c.A,{title:(0,a.jsx)(l.default,{sx:{textAlign:"center"},children:(0,a.jsx)(s.y,{isInset:!0,children:"カードをめくろう!"})})}),(0,a.jsx)(x.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(u.RC,{slidesPerView:1,modules:[p.ZD,p.Vx],effect:"cards",grabCursor:!0,navigation:{nextEl:".swiper-button-next"},pagination:{clickable:!0},oneWayMovement:!0,speed:500,nested:!0,onReachEnd:()=>{m(!0)},allowSlideNext:!i,style:{width:"100%",overflow:"visible"},cardsEffect:{perSlideOffset:1,rotate:!1,perSlideRotate:0,slideShadows:!1},children:t.map(e=>(0,a.jsx)(u.qr,{style:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"visible"},children:(0,a.jsx)(g.T,{card:e,onClick:()=>{}})},e.id))})}),(0,a.jsx)(f.A,{sx:{justifyContent:"center",minHeight:"64px",marginBottom:"8px"},children:i?(0,a.jsx)(o.A,{onClick:()=>{r(),(0,h.eV)(t),m(!1)},children:"終了"},"end"):(0,a.jsx)(o.A,{"aria-label":"めくる",className:"swiper-button-next",children:"めくる"},"next")})]})})},b=e=>{let{cards:t,onComplete:r}=e,[o,s]=(0,n.useState)(!0),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{o&&d.current&&d.current.focus()},[o]),(0,a.jsx)(l.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,a.jsx)(i.A,{open:o,slotProps:{backdrop:{style:{backgroundColor:"transparent",backdropFilter:"blur(10px)"}}},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description","aria-modal":"true",role:"dialog",children:(0,a.jsx)(l.default,{ref:d,tabIndex:-1,sx:{maxWidth:"600px",margin:"auto",outline:"none",position:"relative"},children:(0,a.jsx)(m,{cards:t,onClose:()=>{s(!1),r&&r()}})})})})};var j=r(6854);r(2252);let w=e=>{let{content:t,onSlideChange:r}=e,[o,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{i(!0)},100);return()=>clearTimeout(e)},[]),(0,a.jsxs)(l.default,{sx:{width:"100%",overflow:"hidden",position:"relative"},children:[!o&&(0,a.jsx)(l.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,a.jsx)(j.A,{})}),o&&(0,a.jsx)(u.RC,{effect:"coverflow",grabCursor:!0,loop:!0,centeredSlides:!0,slidesPerView:1.5,breakpoints:{640:{slidesPerView:2},1024:{slidesPerView:3}},modules:[p.t9],coverflowEffect:{depth:100,rotate:-10,stretch:0,modifier:1,scale:1,slideShadows:!1},"aria-label":"Swiper container",role:"region",onSlideChange:r,children:t.map((e,t)=>(0,a.jsx)(u.qr,{children:(0,a.jsx)(l.default,{sx:{py:4,px:2},children:e})},t))})]})};var C=r(5565);r(6555);let y=e=>{let{url:t,alt:r,showText:o}=e;return(0,a.jsxs)(l.default,{sx:{position:"relative",width:{xs:"150px",md:"200px"},height:{xs:"280px",md:"380px"},display:"flex",flexDirection:"column",alignItems:"center",margin:"0 auto"},children:[(0,a.jsx)(d.default,{sx:{width:"100%",height:{xs:"220px",md:"300px"},overflow:"hidden",zIndex:2,borderRadius:"12px"},children:(0,a.jsxs)(x.default,{sx:{p:0,width:"100%",height:"100%",position:"relative"},children:[(0,a.jsx)(C.default,{src:t,alt:r,sizes:"(max-width: 600px) 150px, 200px",style:{objectFit:"fill"},fill:!0}),o&&(0,a.jsx)(l.default,{sx:{position:"absolute",bottom:"40px",width:"100%",textAlign:"center",color:"white",fontSize:{xs:"14px",md:"18px"},fontWeight:"bold",textShadow:"0 0 5px rgba(0, 0, 0, 0.5)"},children:"Card Game"})]})}),(0,a.jsx)(l.default,{sx:{position:"absolute",top:{xs:"240px",md:"320px"},width:{xs:"150px",md:"200px"},height:{xs:"40px",md:"60px"},overflow:"hidden",transform:"scaleY(-1)",opacity:.3,clipPath:"inset(0px 0px 0px 0px round 0px 0px 12px 12px)"},children:(0,a.jsx)(C.default,{src:t,alt:"".concat(r," Reflection"),sizes:"(max-width: 600px) 150px, 200px",style:{objectFit:"cover"},fill:!0})})]})},k=e=>{let{packImg:t}=e;return(0,a.jsx)(l.default,{sx:{width:{xs:"150px",md:"200px"},height:{xs:"280px",md:"380px"},margin:"0 auto"},children:(0,a.jsx)(u.RC,{effect:"flip",grabCursor:!0,modules:[p.n],flipEffect:{slideShadows:!1},style:{width:"100%",height:"100%",overflow:"hidden"},loop:!0,children:[t.front,t.back].map((e,t)=>(0,a.jsx)(u.qr,{children:(0,a.jsx)(y,{url:e.url,alt:e.alt,showText:0===t})},t))})})},S=e=>{let{packs:t,onSlideChange:r,onOpenPack:n}=e;return(0,a.jsx)(l.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:2,padding:2},children:(0,a.jsxs)(d.default,{sx:{width:"100%",bgcolor:"#f5f5f5",borderRadius:"12px",boxShadow:"4px 4px 8px #e0e0e0, -4px -4px 8px #ffffff",margin:"16px 0",overflow:"hidden"},children:[(0,a.jsx)(c.A,{title:(0,a.jsx)(l.default,{sx:{textAlign:"center"},children:(0,a.jsx)(s.y,{isInset:!0,variant:"h6",sx:{textAlign:"center"},children:"パックを選ぼう!"})})}),(0,a.jsxs)(x.default,{sx:{padding:"16px"},children:[" ",(0,a.jsx)(w,{content:t.map(e=>(0,a.jsx)(k,{packImg:e.img},e.id)),onSlideChange:e=>r(t[e.realIndex])})]}),(0,a.jsx)(f.A,{sx:{justifyContent:"center",padding:"16px"},children:(0,a.jsx)(o.A,{onClick:n,children:"開封"})})]})})},v=e=>{let{packs:t,fallback:r}=e,[o,i]=(0,n.useState)(t),[s,d]=(0,n.useState)(null),[c,x]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{o&&o.length>0&&d(o[0])},[o]),o&&0!==o.length)?(0,a.jsx)(l.default,{children:c?s&&(0,a.jsx)(b,{cards:s.cards,onComplete:()=>{if(s){let e=o.filter(e=>e.id!==s.id);i(e),e.length>0?d(e[0]):d(null)}x(!1)}}):(0,a.jsx)(S,{packs:o,onSlideChange:e=>{d(e)},onOpenPack:()=>{s&&x(!0)}})}):(0,a.jsx)(a.Fragment,{children:r})},A="https://shimisyou.github.io/next-app/next",I=()=>{let e=Math.random();return e<=.01?"ultra-rare":e<=.1?"super-rare":e<=.5?"rare":"common"},R=(e,t)=>Array.from({length:t},(t,r)=>{let a=100*e+r+1,o=Math.floor(10*Math.random())+1;return{id:a,name:"Card ".concat(a),rarity:I(),img:"".concat(A,"/cards/series1/").concat(String(o).padStart(2,"0"),".png")}});Array.from({length:10},(e,t)=>{let r=t+1;return{id:r,name:"Pack ".concat(r),img:{front:{url:"".concat(A,"/cards/series1/09.png"),alt:"Front of Pack ".concat(r)},back:{url:"".concat(A,"/pack1.png"),alt:"Back of Pack ".concat(r)}},cards:R(r,5)}});let T=()=>{let e="?cb=".concat(Date.now());return Array.from({length:10},(t,r)=>{let a=r+1;return{id:a,name:"Pack ".concat(a),img:{front:{url:"".concat(A,"/cards/series1/09.png").concat(e),alt:"Front of Pack ".concat(a)},back:{url:"".concat(A,"/pack1.png").concat(e),alt:"Back of Pack ".concat(a)}},cards:R(a,5)}})};var P=r(8173),B=r.n(P);let E=()=>{let[e,t]=(0,n.useState)([]);return((0,n.useEffect)(()=>{t(T())},[]),e.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B(),{href:"/tcg/card",passHref:!0,children:(0,a.jsx)(o.A,{children:"カード一覧へ"})}),(0,a.jsx)(v,{packs:e,fallback:(0,a.jsx)("div",{children:"Loading packs..."})})]}):(0,a.jsx)("div",{children:"Loading packs..."})}},7756:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),o=r(2282),l=r(4736);let n=e=>{let{children:t,...r}=e;return(0,a.jsx)(o.A,{sx:{bgcolor:"#f5f5f5",borderRadius:"16px",boxShadow:"6px 6px 12px #d1d1d1, -6px -6px 12px #ffffff",color:"#333",padding:"10px 20px","&:hover":{bgcolor:"#eaeaea"}},...r,children:(0,a.jsx)(l.default,{variant:"body1",sx:{fontWeight:"bold",textShadow:"0 0 5px rgba(0, 0, 0, 0.2)"},children:t})})}},3755:(e,t,r)=>{"use strict";r.d(t,{y:()=>l});var a=r(5155),o=r(4736);let l=e=>{let{isInset:t=!0,bgcolor:r="#f5f5f5",boxShadow:l,sx:n={},children:i,...s}=e;return(0,a.jsx)(o.default,{...s,sx:{display:"inline-block",fontWeight:600,p:1.5,px:4,bgcolor:r,borderRadius:"16px",textShadow:"0 0 3px rgba(0, 0, 0, 0.1)",boxShadow:l||(t?"inset 3px 3px 6px #cccccc, inset -3px -3px 6px #ffffff":"3px 3px 6px #cccccc, -3px -3px 6px #ffffff"),color:"#333",...n},children:i})}},7614:(e,t,r)=>{"use strict";r.d(t,{T:()=>x});var a=r(5155),o=r(4665),l=r(8998),n=r(4736),i=r(5565);let s={backgroundColor:"#ffffff",boxShadow:"4px 4px 8px rgba(0, 0, 0, 0.1)",nameBackgroundColor:"#f0f0f0",nameTextColor:"#333",rarityBackgroundColor:"#f0f0f0",rarityTextColor:"#333"},d={"ultra-rare":{backgroundColor:"#ffeb3b",boxShadow:"0 0 10px rgba(255, 223, 0, 0.8)",nameBackgroundColor:"#ffd700",nameTextColor:"#000",rarityBackgroundColor:"#ffd700",rarityTextColor:"#000"},"super-rare":{backgroundColor:"#b0e0e6",boxShadow:"0 0 10px rgba(70, 130, 180, 0.5)",nameBackgroundColor:"#4682b4",nameTextColor:"#fff",rarityBackgroundColor:"#4682b4",rarityTextColor:"#fff"},rare:{backgroundColor:"#dcdcdc",boxShadow:"0 0 10px rgba(192, 192, 192, 0.5)",nameBackgroundColor:"#c0c0c0",nameTextColor:"#000",rarityBackgroundColor:"#c0c0c0",rarityTextColor:"#000"}},c=e=>({...s,...d[e]||{}}),x=e=>{let{card:t,onClick:r}=e,s=c(t.rarity);return(0,a.jsxs)(o.default,{onClick:r,sx:{width:{xs:"140px",md:"200px"},height:{xs:"250px",md:"380px"},borderRadius:"12px",p:1,display:"flex",flexDirection:"column",justifyContent:"space-between",background:s.backgroundColor,boxShadow:s.boxShadow,position:"relative",overflow:"hidden",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:[(0,a.jsx)(l.default,{sx:{textAlign:"center",backgroundColor:s.nameBackgroundColor,color:s.nameTextColor,padding:"2px 4px",fontWeight:"bold",fontSize:"0.5rem",borderRadius:"8px 8px 0 0"},children:(0,a.jsx)(n.default,{variant:"body2",noWrap:!0,children:t.name})}),(0,a.jsx)(l.default,{sx:{flex:1,position:"relative",aspectRatio:"2 / 3",overflow:"hidden"},children:(0,a.jsx)(i.default,{src:t.img,alt:t.name,style:{objectFit:"cover"},fill:!0})}),(0,a.jsx)(l.default,{sx:{textAlign:"center",backgroundColor:s.rarityBackgroundColor,color:s.rarityTextColor,padding:"2px 4px",fontWeight:"bold",fontSize:"0.5rem",borderRadius:"0 0 8px 8px"},children:(0,a.jsx)(n.default,{variant:"body2",children:t.rarity.toUpperCase()})})]})}},1314:(e,t,r)=>{"use strict";r.d(t,{eV:()=>o,kv:()=>n,sw:()=>i,uJ:()=>l});let a="collectedCards",o=e=>{let t=[...JSON.parse(localStorage.getItem(a)||"[]")];e.forEach(e=>{let r=t.find(t=>t.img===e.img&&t.rarity===e.rarity);r?r.count+=1:t.push({...e,count:1})}),localStorage.setItem(a,JSON.stringify(t))},l=()=>JSON.parse(localStorage.getItem(a)||"[]"),n=e=>{let t=l().filter(t=>t.id!==e);localStorage.setItem(a,JSON.stringify(t))},i=()=>{localStorage.removeItem(a)}}},e=>{var t=t=>e(e.s=t);e.O(0,[424,275,72,712,566,496,126,441,517,358],()=>t(2974)),_N_E=e.O()}]);